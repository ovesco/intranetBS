<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{% block titre %}{% endblock %}</title>
        <meta name="description" content="Outil de gestion de groupe scout développé par la Brigade de Sauvabelin">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <meta name="mobile-web-app-capable" content="yes">

        {#
        <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/jquery-editable/css/jquery-editable.css" rel="stylesheet"/>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700,300&subset=latin,vietnamese' rel='stylesheet' type='text/css'>
        #}

        {% stylesheets
        '@AppBundle/Resources/public/css/Layout/*'
        '@AppBundle/Resources/public/css/Editable/*'
        output='css/layout.css' %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}

        {% javascripts
        '@AppBundle/Resources/public/js/LayoutHead/*'
        output="js/layout_head.js"
        %}
        <script src="{{ asset_url }}"></script>
        {% endjavascripts %}

        {% block headjs %}{% endblock %}

        {# include semantic files (js,css,icon and fonts #}
        {% include 'AppBundle:Layout:load_semantic.html.twig' %}

        {% block css %}{% endblock %}

    </head>

    <body class="pusher">

        {% cache 'twig.layout.main_menu' {time: 0} %}
        {{ render(controller('AppBundle:Layout:mainMenuGenerate')) }}
        {% endcache %}

        {% include 'AppBundle:Layout:top_menu.html.twig' %}


            <div id="main-container">
                {% block content %}{% endblock %}
            </div>
            <div id="server-data" data-client="{% if clientData is defined %}{{ clientData }}{% endif %}"></div>


        {#
            LISTING
            =======

            On définit le container, car il nous permettra ensuite de modifier le menu
            de manière dynamique à chaque fois qu'on souhaite accéder au listing
        #}
        <div class="ui top sidebar ui secondary segment" id="listing-bar"></div>

        {#
            On définit ici le container à menu. On y stocke le menu de popup géneré dynamiquement pour pouvoir
            l'afficher n'importe où sur la page

             <div id="popup-menu-container"></div>
        #}


        {% include 'AppBundle:Listing:modal_add_listing.html.twig' %}

        {#
        <!-- on ajoute aussi un container qui contiendra les modales génerées dynamiquement -->
        <div id="dynamic-modal-container"></div>
        #}




        {# fos js routing bundle #}
        <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
        <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

        {% javascripts
        '@AppBundle/Resources/public/js/ExternalLib/*'
        '@AppBundle/Resources/public/js/Layout/*'
        output="js/layout.js"
        %}
        <script src="{{ asset_url }}"></script>
        {% endjavascripts %}


        <script type="text/javascript">
            {#
             * Pour chaque flashbag contenu, sachant qu'ils ne contiennent
             * que des alertes et des messages, on génère
             * une alerte correspondante
             #}
            $(document).ready(function(){
                {% for label, flashes in app.session.flashbag.all %}
                    {% for flash in flashes %}
                        alerte.send("{{ flash }}", "{{ label }}");
                    {% endfor %}
                {% endfor %}
            });
        </script>


        {# javascript en fin de page #}
        {% block js %}{% endblock %}
    </body>
</html>